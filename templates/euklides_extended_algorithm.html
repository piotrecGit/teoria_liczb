{%extends "base_bootstrap.html" %}

{% block content %}

<div class="">
  <h2 class="title">Rozszerzony algorytm Euklidesa</h2>
    <div>
        Rozszerzony algorytm euklidesa pozwala obliczyć równanie diofantyczne NWD(a, b) = p*a + q*b
        <br>Dzięki temu jesteśmy w stanie obliczyć odwrotność liczby modulo.
        <br>
        <br>
    </div>

  <form style="width: 10%;margin-left: 20px;" method="POST">
      {{ form.csrf_token }}
      <div class="form-group">
          {{ form.a.label }}
          {{ form.a(class="form-control") }}

      </div>
      <div class="form-group">
          {{ form.b.label }}
          {{ form.b(class="form-control") }}
      </div>
      <br>
      <div class="form-group text-center">
          {{ form.submit(class="btn btn-primary") }}
      </div>
  </form>
<br>
    {% if occured_errors is defined %}
        <div style="width: 40%; height: auto; overflow-wrap: break-word;" class="alert alert-danger">
            {{occured_errors | safe}}
        </div>

    {% endif %}

<br>
{% if data is defined %}
    <div style="width: 40%; height: auto; overflow-wrap: break-word;" class="alert alert-primary">
        NWD({{data["input_a"]}},{{data["input_b"]}}) = {{data["a"]}}
        <br>
        {% if data["a"] == 1 %}
        Odwrotność {{data["input_a"]}} mod {{data["input_b"]}} = {{data["pa"]}} (mod {{data["input_b"]}})<br>(ponieważ {{data["pa"]}}*{{data["input_a"]}} mod {{data["input_b"]}} = 1)
        {% else %}
        Odwrotność {{data["input_a"]}} mod {{data["input_b"]}} nie istnieje ponieważ liczby {{data["input_a"]}} i {{data["input_b"]}} nie są względnie pierwsze.
        {% endif %}
        <br>

    </div>

    {% if data["sign"] < 0 and data["a"] == 1 %}
        <div style="width: 40%; height: auto; overflow-wrap: break-word;" class="alert alert-warning">
            Uwaga ponieważ wartość pa na wyjściu była ujemna dodano do niej wartość b aby wynik nie był ujemny
        </div>
    {% endif %}

    {% endif %}

    <br>

{% if data is defined %}

    <div>
        <table style="width: 50%;" class="table text-center">
            <thead>
            <th>iteracja</th>
            <th>a</th>
            <th>b</th>
            <th>pa</th>
            <th>old_pa</th>
            <th>qa</th>
            <th>old_qa</th>
            <th>pb</th>
            <th>qb</th>
            </thead>
            {% for item in data["items"] %}
            <TR>
               <TD class="c1">{{item.counter}}</TD>
               <TD class="c2">{{item.a}}</TD>
               <TD class="c3">{{item.b}}</TD>
               <TD class="c4">{{item.pa}}</TD>
               <TD class="c5">{{item.old_pa}}</TD>
               <TD class="c6">{{item.qa}}</TD>
               <TD class="c7">{{item.old_qa}}</TD>
               <TD class="c8">{{item.pb}}</TD>
               <TD class="c9">{{item.qb}}</TD>
            </TR>
            {% endfor %}
        </table>

    </div>
{% endif %}

</div>
{% endblock %}